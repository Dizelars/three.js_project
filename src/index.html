<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Гараж ЦОДД</title>
        <link rel="stylesheet" href="style/style.css">
        <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
    </head>
    <body>
    <div class="progress-bar">
        <div class="progress-bar-container">
            <div class="image">
                <img src="/src/img/layout/loader/2.svg" alt="цодд">
                <p class="image-text">ЦОДД</p>
            </div>
            <span id="progress-label">0%</span>
            <progress id="progress-bar" value="0" max="100"></progress>
            <label for="progress-bar">Загрузка...</label>
        </div>
    </div>


    <header class="header">
            <div class="container">
                <div class="header__wrapper">
                    <div class="header__logo">
                        <img class="header__logo-img" src="./img/layout/header_logo.svg" alt="logo">
                        <p class="header__logo-text">Гараж ЦОДД</p>
                    </div>
                    <div class="header__info">
                        <img class="header__info-img" src="./img/layout/header_img2.png" alt="model_preview">
                        <div class="header__info-descr">
                            <p class="header__info-text">Дорожный патруль</p>
                            <p class="header__info-text">30 автомобилей</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <section class="tech_spec">
                <div class="container__content">
                    <div class="tech_spec__wrapper">
                        <div class="tech_spec__description">
                            <div class="tech_spec__info-wrapper">
                                <div class="tech_spec__titles">
                                    <div class="text_spec__texts">
                                        <p class="tech_spec__title">Дорожный патруль</p>
                                        <p class="tech_spec__subtitle">Автомобиль службы помощи ЦОДД</p>
                                    </div>
                                    <a class="tech_spec__btn-copied">
                                        <span>Скрыть</span>
                                        <img src="./img/layout/icon-arrow.svg" alt="icon-arrow">
                                    </a>
                                </div>
                                <div class="tech_spec__visible hidden">
                                    <div class="tech_spec__mission">
                                        <p class="tech_spec__text">Задача:</p>
                                        <p class="tech_spec__text-descr">Регулировать движение на сложных участках, помогать водителям при поломке или аварии.</p>
                                    </div>
                                    <div class="tech_spec__outfit">
                                        <p class="tech_spec__text">Экипировка:</p>
                                        <ul class="tech_spec__outfit-list">
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_1.svg" alt="Огнетушитель">
                                                </div>
                                                <span class="tech_spec__outfit-text">Огнетушитель</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_2.svg" alt="Аптечка">
                                                </div>
                                                <span class="tech_spec__outfit-text">Аптечка</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_3.svg" alt="Инструменты">
                                                </div>
                                                <span class="tech_spec__outfit-text">Инструменты</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_4.svg" alt="Трос">
                                                </div>
                                                <span class="tech_spec__outfit-text">Трос</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_6.svg" alt="Пусковое устройство">
                                                </div>
                                                <span class="tech_spec__outfit-text">Пусковое устройство</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_7.svg" alt="Бланки европротокола">
                                                </div>
                                                <span class="tech_spec__outfit-text">Бланки европротокола</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_8.svg" alt="Телескопическая лестница">
                                                </div>
                                                <span class="tech_spec__outfit-text">Телескопическая лестница</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_9.svg" alt="Домкрат">
                                                </div>
                                                <span class="tech_spec__outfit-text">Домкрат</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_10.svg" alt="Дорожные конусы">
                                                </div>
                                                <span class="tech_spec__outfit-text">Дорожные конусы</span>
                                            </li>
                                            <li class="tech_spec__outfit-item">
                                                <div class="tech_spec__outfit-img">
                                                    <img src="./img/layout/outfit/outfit_11.svg" alt="Гайковерт">
                                                </div>
                                                <span class="tech_spec__outfit-text">Гайковерт</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <a class="tech_spec__btn">
                                <span>Подробнее</span>
                                <img src="./img/layout/icon-arrow.svg" alt="icon-arrow">
                            </a>
                        </div>
                    </div>
                </div>
            </section>
            <div class="tech_spec__interior">
                <div class="tech_spec__interior-btn">
                    <span class="tech_spec__interior-text">В салон</span>
                    <div class="arrow-wrapper">
                        <img src="./img/layout/interior_arrow.svg" alt="interior_arrow">
                    </div>
                </div>
            </div>
        </main>
        <section class="auto_park">
            <div class="container">
                <div class="auto_park_wrapper">
                    <div class="auto_park__control">
                        <p class="auto_park__title">Транспорт ЦОДД</p>
                        <img class="rotate" src="./img/layout/auto_park_arrow.svg" alt="auto_park_btn">
                    </div>
                    <div class="auto_park_slider">
                        <div class="auto_park_slider-overflow">
                            <div class="auto_park_slider-wrapper">
                                <div class="gallery_item active">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_amarok2.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_solara_1.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_solara_2.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_bus.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_amarok2.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_solara_1.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_solara_2.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_bus.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_amarok2.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_solara_1.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_solara_2.png" alt="slide">
                                </div>
                                <div class="gallery_item">
                                    <img class="gallery_item-img" src="./img/layout/slider/slide_bus.png" alt="slide">
                                </div>
                            </div>
                        </div>
                        <div class="auto_park_slider-button">
                            <button class="prev_button">
                                <img src="./img/layout/slider/icon-arrow.png" alt="arrow_prev">
                            </button>
                            <button class="next_button">
                                <img src="./img/layout/slider/icon-arrow.png" alt="arrow_next">
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    <a-scene>
        <a-assets>
            <img id="img" src="/src/img/amarok.jpg"/>
        </a-assets>
        <a-sky id="img-360" radius="10" rotation="0 180 0" src="#img"></a-sky>
        <a-camera rotation-reader></a-camera>
    </a-scene>

<!--    <iframe src="https://app.vectary.com/p/6wNw0ONZgebOfN5WkQrTcn" frameborder="0" width="100%" height="100%"></iframe>-->

    <script type="module" src="js/three/my_three.js"></script>
<!--    <script type="module" src="js/three/functions/aframe.js"></script>-->
    <script>
        AFRAME.registerComponent('rotation-reader', {
            init() {
                this.onDeviceOrientation = this.onDeviceOrientation.bind(this);
                this.addEventListeners();
                // const modalAframe = document.querySelector('.a-modal');
                // const modalAframe2 = document.getElementById('ar-permission-overlay');
                // console.log(modalAframe);
                // console.log(modalAframe2);
            },

            addEventListeners() {
                // Проверка поддержки гироскопа
                if (window.DeviceOrientationEvent && typeof window.DeviceOrientationEvent.requestPermission === 'function') {
                    // Запрос доступа к гироскопу
                    window.DeviceOrientationEvent.requestPermission().then(permissionState => {
                        if (permissionState === 'granted') {
                            window.addEventListener('deviceorientation', this.onDeviceOrientation);
                        }
                    }).catch(console.error);
                } else {
                    window.addEventListener('deviceorientation', this.onDeviceOrientation);
                }
            },

            onDeviceOrientation(event) {
                const cameraEl = this.el;
                const { alpha, beta, gamma } = event;

                // Применение поворота к камере
                cameraEl.setAttribute('rotation', {
                    x: beta,
                    y: alpha,
                    z: -gamma
                });
            }
        });
    </script>
    </body>
</html>